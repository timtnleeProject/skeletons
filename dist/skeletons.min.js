window.Skeletons=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=function(e){e._version_="0.0.7",e.String=function(t){return new e.Types(t,"StringFn",{})},e.Array=function(t){return new e.Types(t,"ArrayFn",{item:null})},e.Boolean=function(t){return new e.Types(t,"BooleanFn",{})},e.Number=function(t){return new e.Types(t,"NumberFn",{allowNaN:!0})},e.Object=function(t){return new e.Types(t,"ObjectFn",{class:null,extraKey:!1,object:{}})},e.MapObject=function(t){return new e.Types(t,"MapObjectFn",{keyValidator:null,item:null})},e.Function=function(t){return new e.Types(t,"FunctionFn",{})},e.Symbol=function(t){return new e.Types(t,"SymbolFn",{})},e.Null=function(t){return new e.Types(t,"NullFn",{})},e.Any=function(t){return new e.Types(t,"AnyFn",{exclude:null,include:null})},e.Types=function(t,n,o){const i={required:!0,default:void 0,validator:null},a=Object.assign(i,o);this.opt=e.setDefault(t,a),this.fname=n},e.Warnings=function(t){new e({code:Number,log:String,type:String,depth:e.Array()}).validate(t,{throw:!0});for(let e in t)this[e]=t[e]},e.typeof=function(e){return null===e?"null":Array.isArray(e)?"array":typeof e},e.getKeyStr=function(e){let t="";return e.forEach(e=>{t+=`[${"string"==typeof e?`'${e}'`:e}]`}),t||" "},e.setDefault=function(t,n){if(!t)return n;if("object"!==e.typeof(t))throw"Skeletons.setDefault(data, options), options must be object";for(let e in n)void 0===t[e]&&(t[e]=n[e]);return t}}},function(e,t){e.exports=function(e){e.prototype.validate=function(t,n={}){const o=Object.assign({root:this,isbranch:!1},this.default);return n=e.setDefault(n,o),Object.assign(this,n),this.data=t,this.valid=!0,this.warnings=[],this.lookup([]),this},e.prototype.subValidate=function(e,t){return this.validate(e,{isbranch:!0,root:t})},e.prototype.lookup=function(t=[]){let{schema_deep:n,data_deep:o}=this.getDepth(t);if(n instanceof e.Types){const e=n;return void this[e.fname](e.opt,t)}if("function"==typeof n){const i=typeof n();if(i!==typeof o){let n=e.typeof(o);this.warn(t,`expect [${i}] but got [${n}]`,0)}return}if("object"!==e.typeof(n))return void this.warn(t,"is not a valid schema and will be ignored, please fixed it.",99);const i=e.typeof(o);if("object"!=i)return this.warn(t,`expect object, got ${i}`,1);let a={...o};for(let e in n)delete a[e],this.lookup([...t,e]);if(!this.rule.extraKey)for(let e in a)this.warn(t,`property '${e}' not defined in schema`,5)},e.prototype.getDepth=function(e){let t=this.schema,n=this.data;return e.forEach(e=>{t=t[e],n=n[e]}),{schema_deep:t,data_deep:n}},e.prototype.warn=function(t,n,o){!0===this.valid&&(this.valid=!1);let i="",a=o>=10?this.schemaName:this.dataName;switch(o){case 0:i="[Unexpected Type]";break;case 2:i="[Value invalid]";break;case 5:i="[Unknown Property]";break;case 6:i="[keyValidator failed]";break;case 7:i="[Types Not Matched]";break;case 8:i="[Class Not Matched]";break;case 99:i="[Wrong Schema]"}const r=`Skeletons Warn: ${i} at ${a}${e.getKeyStr(t)}: ${n}`;if(this.warnings.push(new e.Warnings({code:o,log:n,type:i,depth:t})),!this.isbranch){if(this.throw||o>=10)throw r;return this.console?console.log(r):void 0}},e.prototype.useOriginWarn=function({warnings:e,originDepth:t,schemaName:n}){e.forEach(e=>{const o=this.schema_name;this.schemaName=n;let i=e.code>10?[]:[...t,...e.depth];e.code>10&&(this.isbranch=!1),this.warn(i,e.log,e.code),this.schemaName=o})}}},function(e,t){e.exports=function(e){e.prototype.SOP=function(t,n,o,i){let{data_deep:a}=this.getDepth(n);if(!(!1===t.required&&void 0===a||void 0!==t.default&&a===t.default)){if(i(a)){if(t.validator){if("function"!=typeof t.validator)return this.warn(n,"validator must be a function",99);if(!0!==t.validator(a,this.root.data))return this.warn(n,"validation failed",2)}return 200}{const t=e.typeof(a);this.warn(n,`expect [${o}] but got [${t}]`,0)}}},e.prototype.ArrayFn=function(t,n){if(200==this.SOP(t,n,"array",e=>Array.isArray(e))&&t.item){const{data_deep:o}=this.getDepth(n),i=new e(t.item);o.forEach((e,t)=>{i.subValidate(e,this),i.valid||this.useOriginWarn({warnings:i.warnings,originDepth:[...n,t],schemaName:this.schemaName+", Skeletons.Array({ item }) item"})})}},e.prototype.ObjectFn=function(t,n){if(200!=this.SOP(t,n,"object",t=>"object"===e.typeof(t)))return;const{data_deep:o}=this.getDepth(n);if(t.class){if("function"!=typeof t.class)return this.warn(n,"Skeletons.Object({ class }) class is not a function/class",99);o instanceof t.class||this.warn(n,`object expect instanceof [${t.class.name}] but got instanceof [${Object.getPrototypeOf(o).constructor.name}]`,8)}if(t.object){if("object"!==e.typeof(t.object))return this.warn(n,"Skeletons.Object({ object }) object must be an object {}",99);if(t.object instanceof e.Types)return this.warn(n,"Skeletons.Object({ object }) object can only use iteral object schema {}",0);const i=new e(t.object,{rule:{extraKey:t.extraKey}});i.subValidate(o,this),i.valid||this.useOriginWarn({warnings:i.warnings,originDepth:n,schemaName:this.schemaName+"Skeletons.Object({ object })"})}},e.prototype.MapObjectFn=function(t,n){if(200!=this.SOP(t,n,"object",t=>"object"===e.typeof(t)))return;const{data_deep:o}=this.getDepth(n);if(t.keyValidator){if("function"!=typeof t.keyValidator)return this.warn(n,"Skeletons.MapObject({ keyValidator }) keyValidator must be function",99);for(let e in o)!0!==t.keyValidator(e,this.root.data)&&this.warn(n,`keyValidator failed at key ${e}`,6)}if(t.item){const i=new e(t.item);for(let e in o)i.subValidate(o[e],this),i.valid||this.useOriginWarn({warnings:i.warnings,originDepth:[...n,e],schemaName:this.schemaName+", Skeletons.MapObject({ item })"})}},e.prototype.FunctionFn=function(t,n){this.SOP(t,n,"function",t=>"function"===e.typeof(t))},e.prototype.NullFn=function(t,n){this.SOP(t,n,"null",t=>"null"===e.typeof(t))},e.prototype.StringFn=function(e,t){this.SOP(e,t,"string",e=>"string"==typeof e)},e.prototype.NumberFn=function(e,t){if(200!=this.SOP(e,t,"number",e=>"number"==typeof e))return;const{data_deep:n}=this.getDepth(t);!1===e.allowNaN&&isNaN(n)&&this.warn(t,"Skeletons.Number({ allowNaN:false }), NaN value not allowed",0)},e.prototype.BooleanFn=function(e,t){this.SOP(e,t,"boolean",e=>"boolean"==typeof e)},e.prototype.SymbolFn=function(e,t){this.SOP(e,t,"symbol",e=>"symbol"==typeof e)},e.prototype.AnyFn=function(t,n){if(this.SOP(t,n,"any",()=>!0),t.include&&t.exclude)return this.warn(n,"Skeletons.Any({ include, exclude }): you defined both include and exclude, which can only be one of them.",99);if(t.include){if(!Array.isArray(t.include))return this.warn(n,"Skeletons.Any({ include }): include must be array",99);const{data_deep:o}=this.getDepth(n);let i=!1;for(let n=0;n<t.include.length;n++){let a=t.include[n],r=new e(a);if(r.subValidate(o,this),r.valid){i=!0;break}}i||this.warn(n,"value no matched type for Skeletons.Any({ include })",7)}if(t.exclude){if(!Array.isArray(t.exclude))return this.warn(n,"Skeletons.Any({ exclude }): exclude must be array",99);const{data_deep:o}=this.getDepth(n);let i=!0;for(let n=0;n<t.exclude.length;n++){let a=t.exclude[n],r=new e(a);if(r.subValidate(o,this),r.valid){i=!1;break}}i||this.warn(n,"value type exists in Skeletons.Any({ exclude })",7)}}}},function(e,t,n){const o=n(0),i=n(1),a=n(2),r=n(4);function s(e,t={}){this.schema=e,this.default={dataName:"data",schemaName:"schema",console:!0,throw:!1,rule:{extraKey:!1}},new r(r.Object({required:!1,object:r.Object({extraKey:!1,object:{dataName:r.String({required:!1}),schemaName:r.String({required:!1}),console:r.Boolean({required:!1}),throw:r.Boolean({required:!1}),rule:r.Object({extraKey:!1,required:!1,object:{extraKey:r.Boolean({required:!1})}})}})}),{dataName:"new Skeletons(schema, options), options"}).validate(t,{throw:!0}),this.default=s.setDefault(t,this.default)}o(s),i(s),a(s),e.exports=s},function(e,t,n){const o=n(1),i=n(2);function a(e,t){this.schema=e,this.default={dataName:"data",schemaName:"schema",console:!0,throw:!1,rule:{}},this.default=a.setDefault(t,this.default);a.setDefault(this.default.rule,{extraKey:!1})}n(0)(a),o(a),i(a),e.exports=a}]);