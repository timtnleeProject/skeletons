window.Skeletons=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t){t.exports=JSON.parse('{"a":"0.2.2"}')},function(t,e,n){"use strict";n.r(e);var i=n(0);var o,r=function(t){t.prototype.validate=function(e,n={}){const i=Object.assign({root:this,isbranch:!1},this.default);return n=t.setDefault(n,i),Object.assign(this,n),this.data=e,this.valid=!0,Object.defineProperty(this,"store",{value:{},configurable:!0,enumerable:!0,writable:!1}),this.warnings=[],this.lookup([]),this},t.prototype.subValidate=function(t,e){return this.validate(t,{isbranch:!0,root:e})},t.prototype.lookup=function(e=[]){let{schema_deep:n,data_deep:i}=this.getDepth(e);if(n instanceof t.Types){const t=n;return void this[t.fname](t.opt,e)}if("function"==typeof n){const o=typeof n();if(o!==typeof i){let n=t.typeof(i);this.warn(e,`expect [${o}] but got [${n}]`,0)}return}const o=t.typeof(n);if("array"===o){const o=t.typeof(i);if("array"!==o)return void this.warn(e,`expect [array] but got [${o}]`,0);if(n.forEach((t,n)=>{this.lookup([...e,n])}),n.length<i.length){let t=n.length;for(;t<i.length;)this.warn([...e,t],`index [${t}] not defined in schema`,4),t++}return}if("object"!==o)return void this.warn(e,"is not a valid schema and will be ignored, please fixed it.",99);const r=t.typeof(i);if("object"!=r)return this.warn(e,`expect object, got ${r}`,1);let a={...i};for(let t in n)delete a[t],this.lookup([...e,t]);if(!this.rule.extraKey)for(let t in a)this.warn(e,`property '${t}' not defined in schema`,5)},t.prototype.getDepth=function(t){let e=this.schema,n=this.data;return t.forEach(t=>{e=e[t],n=n[t]}),{schema_deep:e,data_deep:n}},t.prototype.warn=function(e,n,i){!0===this.valid&&(this.valid=!1);let o="",r=i>=10?this.schemaName:this.dataName;switch(i){case 0:o="[Unexpected Type]";break;case 2:o="[Value invalid]";break;case 4:o="[Unknown index]";break;case 5:o="[Unknown Property]";break;case 6:o="[keyValidator failed]";break;case 7:o="[Types Not Matched]";break;case 8:o="[Class Not Matched]";break;case 99:o="[Wrong Schema]"}const a=`Skeletons Warn: ${o} at ${r}${t.getKeyStr(e)}: ${n}`;if(this.warnings.push(new t.Warnings({code:i,log:n,type:o,depth:e})),!this.isbranch){if(this.throw||i>=10)throw a;return this.console?console.log(a):void 0}},t.prototype.useOriginWarn=function({warnings:t,originDepth:e,schemaName:n}){t.forEach(t=>{const i=this.schemaName;this.schemaName=`${i}: ${n}`;let o=t.code>10?[]:[...e,...t.depth];t.code>10&&(this.isbranch=!1),this.warn(o,t.log,t.code),this.schemaName=i})}};function a(t,e={}){this.schema=t,this.default={dataName:"data",schemaName:"schema",console:!0,throw:!1,rule:{extraKey:!1}},this.default=a.setDefault(e,this.default)}(function(t){t._version_=i.a,t.String=function(e){return new t.Types(e,"StringFn",{})},t.Array=function(e){const n={item:null,array:void 0};return new t.Types(e,"ArrayFn",n)},t.Boolean=function(e){return new t.Types(e,"BooleanFn",{})},t.Number=function(e){return new t.Types(e,"NumberFn",{allowNaN:!0})},t.Object=function(e){return new t.Types(e,"ObjectFn",{class:null,extraKey:!1,object:{}})},t.MapObject=function(e){return new t.Types(e,"MapObjectFn",{keyValidator:null,item:null})},t.Function=function(e){return new t.Types(e,"FunctionFn",{})},t.Symbol=function(e){return new t.Types(e,"SymbolFn",{})},t.Null=function(e){return new t.Types(e,"NullFn",{})},t.Any=function(e){return new t.Types(e,"AnyFn",{exclude:null,include:null})},t.Types=function(e={},n,i){const o={required:!0,default:void 0,validator:null},r=Object.assign(o,i);this.opt=t.setDefault(e,r),this.fname=n},t.Warnings=function(e){new t({code:Number,log:String,type:String,depth:t.Array()}).validate(e,{throw:!0});for(let t in e)this[t]=e[t]},t.typeof=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},t.getKeyStr=function(t){let e="";return t.forEach(t=>{e+=`[${"string"==typeof t?`'${t}'`:t}]`}),e||" "},t.setDefault=function(e,n){if(!e)return n;if("object"!==t.typeof(e))throw"Skeletons.setDefault(data, options), options must be object";for(let t in n)void 0===e[t]&&(e[t]=n[t]);return e},t.expectType=function(e){return e instanceof t.Types?e.name.toLowerCase():"function"==typeof e?t.typeof(e()):t.typeof(e)}})(a),r(a),(o=a).prototype.SOP=function(t,e,n,i){let{data_deep:r}=this.getDepth(e);if(!(!1===t.required&&void 0===r||void 0!==t.default&&r===t.default)){if(i(r)){if(t.validator){if("function"!=typeof t.validator)return this.warn(e,"options.validator must be a function",99);if(!0!==t.validator(r,this.root.data,this.root.store))return this.warn(e,"validation failed",2)}return"strictEquals"in t&&t.strictEquals!==r?this.warn(e,"options.strictEquals: actual value isn't strict equals to the expected value",2):200}{const t=o.typeof(r);this.warn(e,`expect [${n}] but got [${t}]`,0)}}},o.prototype.checkMinMax=function(t,e,n,i,o,r){if(void 0!==t[i]){if("number"!=typeof t[i])return this.warn(e,`options.${i} must be a number`,99);if(r<t[i])return this.warn(e,`Skeletons.${n}({ ${i} }), ${r} is lower than ${t[i]}`,2)}if(void 0!==t[o]){if("number"!=typeof t[o])return this.warn(e,`options.${o} must be a number`,99);if(r>t[o])return this.warn(e,`Skeletons.${n}({ ${o} }), ${r} is greater than ${t[o]}`,2)}return 200},o.prototype.ArrayFn=function(t,e){let n=this.SOP(t,e,"array",t=>Array.isArray(t));if(200!==n)return;const{data_deep:i}=this.getDepth(e);if(n=this.checkMinMax(t,e,"Array","minLength","maxLength",i.length),200===n){if(t.item){const n=new o(t.item);i.forEach((t,i)=>{n.subValidate(t,this.root),n.valid||this.useOriginWarn({warnings:n.warnings,originDepth:[...e,i],schemaName:"Skeletons.Array({ item }) options.item"})})}if(void 0!==t.array){const n=t.array;if("array"!==o.typeof(n))return this.warn(e,"Skeletons.Array({ array }) options.array must be an array iteral schema []",99);const r=new o(n);r.subValidate(i,this.root),r.valid||this.useOriginWarn({warnings:r.warnings,originDepth:[...e],schemaName:"Skeletons.Array({ array }) options.array"})}}},o.prototype.ObjectFn=function(t,e){if(200!=this.SOP(t,e,"object",t=>"object"===o.typeof(t)))return;const{data_deep:n}=this.getDepth(e);if(t.class){if("function"!=typeof t.class)return this.warn(e,"Skeletons.Object({ class }) options.class is not a function/class",99);n instanceof t.class||this.warn(e,`object expect instanceof [${t.class.name}] but got instanceof [${Object.getPrototypeOf(n).constructor.name}]`,8)}if(t.object){if("object"!==o.typeof(t.object))return this.warn(e,"Skeletons.Object({ object }) options.object must be an object {}",99);if(t.object instanceof o.Types)return this.warn(e,"Skeletons.Object({ object }) options.object can only use literal object schema {}",99);const i=new o(t.object,{rule:{extraKey:t.extraKey}});i.subValidate(n,this.root),i.valid||this.useOriginWarn({warnings:i.warnings,originDepth:e,schemaName:"Skeletons.Object({ object }) options.object"})}},o.prototype.MapObjectFn=function(t,e){if(200!=this.SOP(t,e,"object",t=>"object"===o.typeof(t)))return;const{data_deep:n}=this.getDepth(e),i={keyValidator:!1,validateItem:!1},r=n=>{i.keyValidator&&!0!==t.keyValidator(n,this.root.data,this.root.store)&&this.warn(e,`keyValidator failed at key ${n}`,6)},a=(t,n,o)=>{i.validateItem&&(o.subValidate(n[t],this.root),o.valid||this.useOriginWarn({warnings:o.warnings,originDepth:[...e,t],schemaName:"Skeletons.MapObject({ item }) options.item"}))};if(t.keyValidator){if("function"!=typeof t.keyValidator)return this.warn(e,"Skeletons.MapObject({ keyValidator }) options.keyValidator must be function",99);i.keyValidator=!0}if(t.item&&(i.validateItem=!0),!i.validateItem&&!i.keyValidator)return;const s=new o(t.item);for(let t in n)r(t),a(t,n,s)},o.prototype.FunctionFn=function(t,e){this.SOP(t,e,"function",t=>"function"===o.typeof(t))},o.prototype.NullFn=function(t,e){this.SOP(t,e,"null",t=>"null"===o.typeof(t))},o.prototype.StringFn=function(t,e){if(200===this.SOP(t,e,"string",t=>"string"==typeof t)){const{data_deep:n}=this.getDepth(e);if(200===this.checkMinMax(t,e,"String","minLength","maxLength",n.length)&&void 0!==t.match){if(!(t.match instanceof RegExp))return this.warn(e,"options.match must be a RegExp",99);n.match(t.match)||this.warn(e,"Skeletons.String({ match }), value do not matches",2)}}},o.prototype.NumberFn=function(t,e){let n=this.SOP(t,e,"number",t=>"number"==typeof t);if(200!=n)return;const{data_deep:i}=this.getDepth(e);if(!1===t.allowNaN&&isNaN(i))return this.warn(e,"Skeletons.Number({ allowNaN:false }), NaN value not allowed",0);n=this.checkMinMax(t,e,"Number","min","max",i)},o.prototype.BooleanFn=function(t,e){this.SOP(t,e,"boolean",t=>"boolean"==typeof t)},o.prototype.SymbolFn=function(t,e){this.SOP(t,e,"symbol",t=>"symbol"==typeof t)},o.prototype.AnyFn=function(t,e){if(this.SOP(t,e,"any",()=>!0),t.include&&t.exclude)return this.warn(e,"Skeletons.Any({ include, exclude }): you defined both include and exclude, which can only be one of them.",99);if(t.include){if(!Array.isArray(t.include))return this.warn(e,"Skeletons.Any({ include }): include must be array",99);const{data_deep:n}=this.getDepth(e);let i=!1;for(let e=0;e<t.include.length;e++){let r=t.include[e],a=new o(r);if(a.subValidate(n,this.root),a.valid){i=!0;break}}i||this.warn(e,"validation fail at Skeletons.Any({ include }): ",7)}if(t.exclude){if(!Array.isArray(t.exclude))return this.warn(e,"Skeletons.Any({ exclude }): exclude must be array",99);const{data_deep:n}=this.getDepth(e);let i=!0;for(let e=0;e<t.exclude.length;e++){let r=t.exclude[e],a=new o(r);if(a.subValidate(n,this.root),a.valid){i=!1;break}}i||this.warn(e,"validation fail at Skeletons.Any({ exclude })",7)}};e.default=a}]);